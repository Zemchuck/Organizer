@import '../../styles/variables.css';
@import '../../styles/utilities.css';

/* ===== DayView – spójny wygląd z WeekView ===== */
.day-view {
  --hour-h: 30px;
  --gutter-w: 56px;
  --grid-major: rgba(255, 255, 255, .22);
  --grid-major-w: 2px;
  --grid-minor: rgba(255, 255, 255, .09);
  --grid-minor-w: 1px;
  --grid-vert: rgba(255, 255, 255, .12);
  --now: #e53935;

  background: var(--bg);
  width: var(--cal-width, min(100%, 960px));
  margin: 0 auto;
}

/* Nagłówek dnia jak w WeekView */
.day-head {
  display: grid;
  place-items: center;
  background: var(--panel);
  color: var(--white);
  font-weight: 800;
  letter-spacing: .2px;
  padding: .5rem .8rem;
  border: 2px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  font-family: "Oxanium", Inter, system-ui, sans-serif;
  margin-bottom: .6rem;
}

/* Siatka dnia: rynna godzin + kolumna z wydarzeniami */
.day-grid {
  display: grid;
  grid-template-columns: var(--gutter-w) minmax(320px, 1fr);
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow);
}

/* Lewa kolumna z godzinami */
.hours-col {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  padding-right: .4rem;
  border-right: 1px solid var(--grid-vert);
  background: rgba(0, 0, 0, .08);
}

.hour-cell {
  height: var(--hour-h);
  display: flex;
  align-items: flex-start;
  justify-content: flex-end;
  font-variant-numeric: tabular-nums;
  opacity: .9;
  padding-top: 2px;
}

/* Prawa kolumna – siatka i eventy */
.day-col {
  position: relative;
  min-height: calc(var(--hour-h) * 24);
  /* pionowe obramowanie dnia */
  box-shadow: inset 1px 0 0 var(--grid-vert);
  /* linie godzin i połówek */
  background-image:
    repeating-linear-gradient(to bottom,
      var(--grid-minor) 0,
      var(--grid-minor) var(--grid-minor-w),
      transparent var(--grid-minor-w),
      transparent calc(var(--hour-h) / 2),
      var(--grid-minor) calc(var(--hour-h) / 2),
      var(--grid-minor) calc(var(--hour-h) / 2 + var(--grid-minor-w)),
      transparent calc(var(--hour-h) / 2 + var(--grid-minor-w)),
      transparent var(--hour-h));
}

/* ukryte wypełniacze wysokości co godzinę */
.hour-row {
  height: var(--hour-h);
  pointer-events: none;
}

/* Bloki zdarzeń */
.event-block {
  position: absolute;
  box-sizing: border-box;
  border-radius: 10px;
  padding: .35rem .45rem;
  color: #fff;
  font-weight: 700;
  text-shadow: 0 1px 1px rgba(0, 0, 0, .35);
  background:
    linear-gradient(180deg, rgba(255, 255, 255, .12) 0%, rgba(0, 0, 0, .06) 100%),
    var(--ev-color, #c84a5b);
  box-shadow:
    0 4px 10px rgba(0, 0, 0, .35),
    inset 0 0 0 1px rgba(0, 0, 0, .15);
  border: 1px solid rgba(0, 0, 0, .15);
  overflow: hidden;
  z-index: 2;
  isolation: isolate;
}

.event-block .ev-time {
  font-size: .8rem;
  opacity: .9;
  margin-right: .4rem;
}

.event-block .ev-title {
  font-size: .92rem;
}

/* Popover info (wspólne z WeekView) */
.popover-meta {
  display: flex;
  flex-wrap: wrap;
  gap: .35rem .6rem;
  font-size: .8rem;
  opacity: .85;
  margin-bottom: .6rem;
}

/* Czerwona linia bieżącego czasu (jeśli używana) */
.now-line {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--now);
  box-shadow: 0 0 0 1px var(--now);
  z-index: 3;
}